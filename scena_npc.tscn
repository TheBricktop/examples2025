[gd_scene load_steps=15 format=3 uid="uid://iwflutm41uo6"]

[ext_resource type="Script" path="res://npc-simple.gd" id="1_o3hgm"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_61nbc"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_tn6cf"]
sky_material = SubResource("ProceduralSkyMaterial_61nbc")

[sub_resource type="Environment" id="Environment_1f0dl"]
background_mode = 2
sky = SubResource("Sky_tn6cf")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_nyubb"]
vertices = PackedVector3Array(-49.5, 0.52, -1.5, -4.5, 0.52, -1.5, -4.25, 0.52, -2, -2.25, 0.52, -49.5, -49.5, 0.52, -49.5, -2.25, 0.52, -2, 2.25, 0.52, -2, 2.25, 0.52, -49.5, 4.5, 0.52, 1.75, 2.5, 0.52, 2, 2.75, 0.52, 6.25, 9.25, 0.52, 6.25, 4.5, 0.52, -1.75, 9.5, 0.52, 8.25, 49.5, 0.52, 8.25, 49.5, 0.52, -49.5, -6.25, 0.52, 7.75, -5.25, 0.52, 7.5, -4.5, 0.52, 1.75, -7.75, 0.52, 9.75, -49.5, 0.52, 10.5, -7.75, 0.52, 10.5, -3.5, 2.74, -1, -3.5, 2.74, 1, 3.5, 2.74, 1, 3.5, 2.74, -1, -3.25, 0.52, -0.75, -3.25, 0.52, 0.75, 3.25, 0.52, 0.75, 3.25, 0.52, -0.75, 0.25, 0.52, 11.75, 1, 0.52, 10.25, 0.5, 0.52, 10, 0.5, 0.52, 6.5, 1.5, 2.74, 7.25, 1.5, 2.74, 9.25, 8.5, 2.74, 9.25, 8.5, 2.74, 7.25, 1.75, 0.52, 7.5, 1.75, 0.52, 9, 8.25, 0.52, 9, 8.25, 0.52, 7.5, 1.25, 0.52, 12.5, 9.25, 0.52, 10.25, 1.25, 0.52, 13.5, -0.5, 0.52, 15.75, -1, 0.52, 49.5, 49.5, 0.52, 49.5, -1, 0.52, 15.75, -1.25, 2.74, 14.75, 0, 2.74, 13.25, 0, 2.74, 12.75, -5.25, 2.74, 8.75, -6.75, 2.74, 10.25, -5.5, 0.52, 11, -1.5, 0.52, 14, -0.5, 0.52, 13.5, -1.25, 0.52, 12.25, -5.25, 0.52, 9.25, -6, 0.52, 10, -1.75, 0.52, 15.75, -2.5, 0.52, 14.75, -7.25, 0.52, 11.5, -49.5, 0.52, 49.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 4), PackedInt32Array(2, 4, 3), PackedInt32Array(3, 5, 2), PackedInt32Array(3, 7, 5), PackedInt32Array(5, 7, 6), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(7, 12, 6), PackedInt32Array(11, 8, 12), PackedInt32Array(14, 13, 11), PackedInt32Array(11, 12, 14), PackedInt32Array(14, 12, 7), PackedInt32Array(14, 7, 15), PackedInt32Array(18, 17, 16), PackedInt32Array(16, 19, 18), PackedInt32Array(18, 19, 1), PackedInt32Array(1, 19, 0), PackedInt32Array(0, 19, 20), PackedInt32Array(19, 21, 20), PackedInt32Array(25, 24, 22), PackedInt32Array(22, 24, 23), PackedInt32Array(29, 28, 26), PackedInt32Array(26, 28, 27), PackedInt32Array(32, 31, 30), PackedInt32Array(33, 9, 10), PackedInt32Array(32, 30, 33), PackedInt32Array(33, 30, 17), PackedInt32Array(17, 18, 33), PackedInt32Array(33, 18, 9), PackedInt32Array(37, 36, 34), PackedInt32Array(34, 36, 35), PackedInt32Array(41, 40, 38), PackedInt32Array(38, 40, 39), PackedInt32Array(30, 31, 42), PackedInt32Array(42, 31, 43), PackedInt32Array(43, 13, 14), PackedInt32Array(44, 42, 43), PackedInt32Array(44, 43, 45), PackedInt32Array(45, 43, 46), PackedInt32Array(46, 43, 14), PackedInt32Array(46, 14, 47), PackedInt32Array(46, 48, 45), PackedInt32Array(50, 49, 51), PackedInt32Array(51, 49, 52), PackedInt32Array(52, 49, 53), PackedInt32Array(59, 58, 54), PackedInt32Array(54, 58, 57), PackedInt32Array(54, 57, 55), PackedInt32Array(55, 57, 56), PackedInt32Array(61, 60, 62), PackedInt32Array(62, 60, 46), PackedInt32Array(60, 48, 46), PackedInt32Array(62, 46, 21), PackedInt32Array(21, 46, 20), PackedInt32Array(20, 46, 63)]
geometry_parsed_geometry_type = 1
cell_height = 0.01

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fxk5p"]
albedo_color = Color(0.201191, 0.319268, 0.205971, 1)

[sub_resource type="BoxMesh" id="BoxMesh_cudvk"]
material = SubResource("StandardMaterial3D_fxk5p")
size = Vector3(100, 1, 100)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_3lxqe"]
points = PackedVector3Array(-50, -0.5, -50, -50, 0.5, -50, 50, -0.5, -50, -50, -0.5, 50, -50, 0.5, 50, 50, 0.5, -50, 50, -0.5, 50, 50, 0.5, 50)

[sub_resource type="BoxMesh" id="BoxMesh_4aigh"]
size = Vector3(7.755, 3.085, 2.775)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_j4gs1"]
points = PackedVector3Array(3.8775, 1.5422, 1.3875, 3.8775, 1.5422, -1.3875, -3.8775, 1.5422, 1.3875, 3.8775, -1.5425, 1.3875, 3.8775, -1.5425, -1.3875, -3.8775, 1.5422, -1.3875, -3.8775, -1.5425, 1.3875, -3.8775, -1.5425, -1.3875)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_3i2gj"]
points = PackedVector3Array(3.8775, 1.5422, 1.3875, 3.8775, 1.5422, -1.3875, -3.8775, 1.5422, 1.3875, 3.8775, -1.5425, 1.3875, 3.8775, -1.5425, -1.3875, -3.8775, 1.5422, -1.3875, -3.8775, -1.5425, 1.3875, -3.8775, -1.5425, -1.3875)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_wbmdw"]
points = PackedVector3Array(3.8775, 1.5422, 1.3875, 3.8775, 1.5422, -1.3875, -3.8775, 1.5422, 1.3875, 3.8775, -1.5425, 1.3875, 3.8775, -1.5425, -1.3875, -3.8775, 1.5422, -1.3875, -3.8775, -1.5425, 1.3875, -3.8775, -1.5425, -1.3875)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_aduyd"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ok3ap"]

[node name="ScenaNPC" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1f0dl")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_nyubb")

[node name="podloga" type="MeshInstance3D" parent="NavigationRegion3D"]
mesh = SubResource("BoxMesh_cudvk")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/podloga"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/podloga/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_3lxqe")

[node name="przeszkoda" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.18473, 0)
mesh = SubResource("BoxMesh_4aigh")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/przeszkoda"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/przeszkoda/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_j4gs1")

[node name="przeszkoda2" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.99499, 1.18473, 8.26382)
mesh = SubResource("BoxMesh_4aigh")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/przeszkoda2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/przeszkoda2/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_3i2gj")

[node name="przeszkoda3" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(0.792162, 0, -0.610311, 0, 1, 0, 0.610311, 0, 0.792162, -3.27239, 1.18473, 11.7074)
mesh = SubResource("BoxMesh_4aigh")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/przeszkoda3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/przeszkoda3/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_wbmdw")

[node name="CharacterBody3D" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.47946, 3.66607)
script = ExtResource("1_o3hgm")
SPEED = 5.0

[node name="MeshInstance3D" type="MeshInstance3D" parent="CharacterBody3D"]
mesh = SubResource("CapsuleMesh_aduyd")

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody3D"]
shape = SubResource("CapsuleShape3D_ok3ap")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="CharacterBody3D"]

[node name="RandomRoamTimer" type="Timer" parent="CharacterBody3D"]
wait_time = 10.0
autostart = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(-0.516569, 0.580099, -0.629795, 0, 0.735531, 0.677491, 0.856245, 0.349971, -0.379953, -16.4993, 17.3566, -5.41745)

[connection signal="timeout" from="CharacterBody3D/RandomRoamTimer" to="CharacterBody3D" method="_on_random_roam_timer_timeout"]
